---
title: 이미지 프로세싱 & 컴퓨터 시각화 4부
---

안녕하세요. 지난시간과는 다르게 이번에는 좀 더 implementation쪽을 중점으로 진행해보려 해요. opencv에서 제공하는 라이브러리는 너무 방대해서 모든것을 다 다룰순 없지만 실제로 많이 쓰이는 녀석들을 중심으로 다룰테니 걱정 안하셔도 될꺼에요. 그럼 시작해볼까요? 

오늘은 여러분과 두가지를 함께 살펴볼꺼에요. 1) 사각형과 원 그리기, 그리고 2) 관심영역(ROI) 색출하기 이렇게 두색션으로 진행할 예정이랍니다. ipython notebook을 켜셨다면 다음과 같이 코드를 작성해봅시다. 

```python
blank_img = np.zeros(shape=(700, 700, 3), dtype = np.int8)
plt.imshow(blank_img)
```

![black](/emerald/img/black.png "black")

다음과 같이 가로,세로 길이가 700픽셀인 까망 도화지가 출력되었습니다. 흑백이미지는 2d라고 분명 이해했는데 왜 3차원 array로 만들었을까 궁금해 하는 분들이 계시겠네요. 그 이유는 저 까망 도화지 위애 다양한 색깔을 이용해서 그림을 그리려 할 예정이거든요. 만약 흑백이라면 까망 도화지에 그릴 수 있는 색깔은 흰색밖에 없어서 눈이 지루할 수도 있거든요. 저번시간에도 간단히 언급을 했지만 컴퓨터는 색깔을 0부터 255까지의 숫자들의 조합으로 인식합니다. 우리는 numpy의 **zeros**라는 함수를 사용하여 row, column의 크기를 지정해주면 700 by 700크기의 모든 값이 0으로 채워진 Matrix가 만들어집니다. 어느세월에 0을 49000번 노가다로 타이핑할껍니까!! 자 그리고 zeros함수 끝에 구지 타입을 저렇게 지정해줘야 하나요? 이건 아마 다른 프로그래머들도 저렇게 구현할테지만 그 이유를 간략히 설명하자면요. numpy를 사용해서 배열을 처음 만들면 데이터 타입은 웃기게도 float입니다. 여기 증거자료 제시합니다.

![zeros_float](/emerald/img/zeros_float.png "zeros_float")  

위사진을 보면 0.이라고 나오죠? 이건 0.0이랑 같다고 보셔도 됩니다. 짧게 설명하자면 0과 0.0은 프로그래밍 세계에서는 엄연히 다릅니다!!!! 사진은 0부터 255까지의 정수들로 이루어져 있으며(정수라고 구체적으로 앞에서 언급을 안한것 같아서 지금 부연설명 할께요) 따라서 *dtype = np.int8* 로 데이터 타입을 암묵적으로 정의해주는 거죠. int형으로 변환하고 다시 출력해보면 아래와 같습니다. 0뒤에 .이 사라졌죠? 

![zeros_int](/emerald/img/zeros_int.png "zeros_int")  

자 서론이 너무 길었네요!! 이제 사각형을 한번 그려볼께요!! opencv에서 제공하는 **rectangle**함수를 사용할꺼에요. 대부분 함수이름이 너무 착해서 추상적인 부분이 없어요. 그럼 원을 그리려면 무슨 함수를 쓰면 될까요? 네!! **circle**이라는 녀석입니다. 먼저 사각형을 까만 도화지 위에 그려보죠.

```python
cv2.rectangle(blank_img, (200,300), (400,400), (255,0,0), 10)
plt.imshow(blank_img)
```

![draw_rect](/emerald/img/draw_rect.png "draw_rect")  

와! 빨간 직사각형이 검은 도화지 위에 그려졌군요! 근데 **rectangle**함수에 뭔 저리도 많은 녀석들이 들어가있는거죠? 머리가 깨질것만 같네요. 하지만 하나도 어려운 부분이 없습니다. 차근차근 하나씩 살펴보죠. 우선 첫번째 파라미터는 우리의 목표물을 설정합니다. 앞에서 *blank_img*라고 명시했기 때문에 그냥 이녀석을 집어넣습니다. 두번째랑 세번째 파라미터는 두 점의 좌표를 뜻합니다. 우리는 두개의 점을 이용해서 사각형을 그리죠. 첫번째 점의 좌표는 (200,300)이네요. X축 기준 200칸 오른으로, Y축 기준 300칸 밑에 존재하는 점입니다. 소실적때 그래프를 그리고 좌표값을 이용해 점을 많이 찍어봤잖아요! 근데 한가지 주의할 사항은 Y축입니다. X축은 우리가 알고 있는 상식대로 이해하시면 되지만 Y축은 약간 지멋대로인 경향이 있네요. 시작 기준이 맨 왼쪽 윗부분이에요. 따라서 (200,300)좌표에 존재하는 점을 찍을때 맨 왼쪽 윗부붙에서 300칸 밑으로 가야 합니다. 실제로 그림을 출력해보면 밑부분과 왼쪽부분에 친절하게 좌표눈금이 나타나죠? 그럼 두번째 점의 좌표에 대한 설명은 생략할께요^^

네번쩨 파라미터는 tuple에 3가지 값이 들어가네요. 음? (255,0,0)?? 눈치가 매우 빠르신 분들은 아마 무릎을 치고 유레카를 외치실수도! 맞습니다. 색깔에 대한 정보입니다. RGB기준으로 맨 앞의 값은 Red, 그 다음 Green, Blue순서입니다. 여기서 우리는 빨강이에 255를 넣고 나머지는 0이기 때문에 빨간색 사각형이 그려지겠네요. 맨 마지막 파라미터는 사각형의 굵기입니다. 값이 커질수록 굵어지고 작아질수록 얇은 사각형이 그려지겠네요. 생각보다 어려운 부분은 없죠?


자! 오늘은 여기까지에요. 지루한 부분이었을텐데 여기까지 읽어오신 분들에게 박수를 보냅니다. 이제부터 조금씩 재미있는 부분을 다뤄보려고 합니다. 여태껏 우리는 사진을 불러오기만 했지 사진을 가지고 무얼 하진 않았잖아요? 다음시간에는 좀 더 다양한 방법으로 사진을 만지작거려볼께요. 그럼 모두들 다음에 봐요!!



